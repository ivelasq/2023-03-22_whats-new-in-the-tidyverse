{
  "hash": "f7795b2ca76212fca82842d4f46c79c3",
  "result": {
    "markdown": "---\ntitle: \"linewidth\"\nsubtitle: \"ggplot2 3.4.0\"\ncategories:\n   - \"ggplot2\"\nimage: \"ggplot-linewidth.png\"\nimage-alt: \"Text that says linewidth ggplot2. An image of a line plot with lines of varying widths.\"\ndescription: \"ggplot2 3.4.0 introduces a new linewidth aesthetic.\"\ndate: 2022-11-04\n---\n\n\nInstall ggplot2 3.4.0 with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npak::pak(\"cran/ggplot2@3.4.0\")\n```\n:::\n\n\n### linewidth\n\n`linewidth` will take over sizing of the width of lines - something that was  handled previously by `size`.\n\n::: {.panel-tabset}\n\n## Before\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2, lib.loc = new_lib)\n\nggplot(airquality) +\n  geom_line(aes(Day, Temp, size = Month, group = Month)) +\n  scale_size(range = c(0.5, 3))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n## After\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\nggplot(airquality) + \n  geom_line(aes(Day, Temp, linewidth = Month, group = Month)) + \n  scale_linewidth(range = c(0.5, 3))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n:::\n\nYou will get a deprecation message if you try to use `size` when you should be using `linewidth`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(airquality) + \n  geom_line(aes(Day, Temp, size = Month, group = Month)) + \n  scale_size(range = c(0.5, 3))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nâ„¹ Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nWhen size is a valid aesthetic like `geom_sf()` or `geom_pointrange()`, you will not get a deprecation warning.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(airquality) +\n  geom_pointrange(aes(x = factor(Month), y = Temp), stat = \"summary\", size = 2)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNo summary function supplied, defaulting to `mean_se()`\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nOn the point of `geom_sf()`, the default line width is now 0.2 instead of 0.5:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nlibrary(patchwork)\ntn <- leaidr::lea_get(\"tn\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOGR data source with driver: ESRI Shapefile \nSource: \"/private/var/folders/pj/nmg9b8_93dq4kwt8nt2d4cj40000gn/T/RtmpSXnsGu/47\", layer: \"47\"\nwith 158 features\nIt has 18 fields\n```\n:::\n\n```{.r .cell-code}\np1 <- tn %>% \n  sf::st_as_sf() %>% \n  ggplot() +\n  geom_sf(linewidth = 0.5) + \n  ggtitle(\"Old default\")\n\np2 <- tn %>% \n  sf::st_as_sf() %>% \n  ggplot() +\n  geom_sf(linewidth = 0.2) + \n  ggtitle(\"New default\")\n\np1/p2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\nThe switch to `linewidth` goes beyond aesthetics and targets everything that used size to target line width.\n\n## Learn more\n\n* [tidyverse blog: ggplot2 3.4.0](https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/)\n* [ggplot2 release notes](https://ggplot2.tidyverse.org/news/index.html)",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}